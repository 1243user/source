# 操作系统中你该熟知的基本概念  
>本文理论概述全部来自于《操作系统》一书，由笔者手打而来。欢迎大家指正其中手误，更希望大家好好把握这些基本知识。  
## 第一章 操作系统引论  
**1、** 操作系统的作用  
>1、操作系统作为用户与计算机硬件系统之间的接口。  
2、操作系统作为计算机系统资源的管理者  
3、操作系统用作扩充机器  

**2、** 操作系统的四个基本特性  
>1、并发性  
2、共享性  
3、虚拟性  
4、异步性  

**3、** 操作系统中的几种模型结构  
>1、无结构操作系统  
2、模块化操作系统结构  
3、分层式操作系统结构  
4、微内核操作系统结构  

**4、** 分时系统与实时系统的概念与应用  
>**分时系统：** 是一种联机的多用户交互式的操作系统。一般采用时间片轮转的方式使一台计算机为多个终端服务。对每个用户能保证足够快的响应时间，并提供交互会话能力。  
**实时系统：** 是指系统能几十响应外部事件的请求，在规定时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。  
应用需求：（1）实时控制  （2）实时信息处理  

## 第二章 进程管理  
**1、** 进程跟程序的区别以及进程的几个重要特性    
>**程序** 程序的顺序执行：通常可以将一个应用程序分成若干个程序段，在各程序段之间，必须按照某种先后 次序执行，仅当当前操作执行完后，才能执行后续操作。  
程序顺序执行时的特征：顺序性、封闭性、可再现性  
程序的并发执行：在对多个作业进行处理时，可使他们并发执行。  
程序的并发执行的特征：间断性、失去封闭性、不可再现性  
**进程** 在多道程序环境下，程序的执行属于并发执行，此时他们将失去其封闭性，并具有间断性和不可再现性的特征。这决定了通常的程序是不能参与并发执行的，因为程序的执行结果是不可再现的。这样，程序的运行也就失去了意义。为了使的程序能并发执行，且为了对并发执行的程序甲乙描述和控制，因此引入了“进程”的概念。  
进程的特征：结构特征、动态性、并发性、独立性、异步性  

**2、** 进程和线程的联系与区别（子进程与线程的区别）  
>**联系**  
（1）一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程。
（2）资源分配给进程，同一进程的所有线程共享该进程的所有资源。
（3）线程在执行过程中，需要协作同步。不同进程的线程间要利用消息通信的办法实现同步。
（4）处理机分给线程，即真正在处理机上运行的是线程。
（5）线程是指进程内的一个执行单元，也是进程内的可调度实体。  
**区别**  
（1）调度：线程作为调度和分配的基本单位，进程作为拥有资源的基本单位。
（2）并发性：不仅进程之间可以并发执行，同一个进程的多个线程之间也可以并发执行。
（3）拥有资源：进程是拥有资源的一个独立单位，线程不拥有系统资源，但可以访问隶属于进程的资源。
（4）系统开销：在创建或撤销进程的时候，由于系统都要为之分配和回收资源，导致系统的明显大于创建或撤销线程时的开销。但进程有独立的地址空间，进程崩溃后，在保护模式下不会对其他的进程产生影响，而线程只是一个进程中的不同的执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮，但是在进程切换时，耗费的资源较大，效率要差些。
线程的划分尺度小于进程，使得多线程程序的并发性高。
另外，进程在执行过程中拥有独立的内存单元，而多个线程共享内存，从而极大的提高了程序运行效率。
线程在执行过程中，每个独立的线程有一个程序运行的入口，顺序执行序列和程序的出口。但是线程不能够独立执行，必须依存在应用程序中，有应用程序提供多个线程执行控制。
从逻辑角度看，多线程的意义子啊与一个应用程序中，有多个执行部分可以同时执行。但操作系统并没有将多个线程看做多个独立的应用，来实现进程的调度和管理以及资源分配。这就是进程和线程的重要区别。  

**3、**进程控制块（PCB）的作用  
>process control block  
为了描述和控制进程运行，系统为每一个进程定义了一个数据结构，也就是进程控制块，他是进程实体的一部分，是操作系统中最重要的记录型数据结构。  
PCB记录了操作系统所需的、用于描述就进程的当前情况以及控制进程运行的全部信息。  
PCB的作用是使一个在多道程序环境下不能独立运行的程序（含数据），成为一个能独立运行的基本单位，一个能与其他进程并发执行的进程。或者说，操作系统是根据PCB来对并发执行的进程进行控制和管理的。  
PCB是进程存在的唯一标志。  

**4、** 进程通信的几种方式（共享内存区、管道、消息队列、信箱）  
>一、管道
单向，一段输入，另一端输出，先进先出FIFO。管道也是文件。管道大小4096字节。
特点：管道满时，写阻塞；空时，读阻塞。
分类：普通管道（仅父子进程间通信）位于内存；命名管道位于文件系统，没有亲缘关系管道只要知道管道名也可以通讯。
管道是由内核管理的一个缓冲区(buffer)，相当于我们放入内存中的一个纸条。管道的一端连接一个进程的输出。这个进程会向管道中放入信息。管道的另一端连接一个进程的输入，这个进程取出被放入管道的信息。一个缓冲区不需要很大，它被设计成为环形的数据结构，以便管道可以被循环利用。当管道中没有信息的话，从管道中读取的进程会等待，直到另一端的进程放入信息。当管道被放满信息的时候，尝试放入信息的进程会等待，直到另一端的进程取出信息。当两个进程都终结的时候，管道也自动消失。  
二、消息队列
消息队列是先进先出FIFO原则  
三、共享内存
共享内存是分配一块能被其他进程访问的内存，实现是通过将内存去映射到共享它的进程的地址空间，使这些进程间的数据传送不再涉及内核，即，进程间通信不需要通过进入内核的系统调用来实现；
共享内存与其他的进程间通信最大的优点是：数据的复制只有两次，一次是从输入文件到共享内存区，一次从共享内存区到输出文件
而其他的则是需要复制4次：服务器将输入文件读入自己的进程空间，再从自己的进程空间写入管道/消息队列等；客户进程从管道/消息队列中读出数据到自己的进程空间，最后输出到客户指定的文件中  
四、信箱  
信箱……  

**5、** 进程的三种基本状态及其转换条件
>状态：就绪状态、运行状态、阻塞状态  
转换：  
就绪——>运行  
运行——>阻塞  
阻塞——>就绪  
运行——>就绪  

**6、** 进程的并发与互斥之间的区别（并发执行，进程同步，进程互斥，异步，并行，多线程的区别）  
>1.1 并发
在操作系统的一个时间段中，有几个程序同时处于启动运行到运行完毕之间的状态，且这几个程序都在同一个处理机上运行。
并发又有伪并发和真并发：伪并发是指单核处理器的并发，真并发是指多核处理器的并发。
1.2 互斥
并发进程之间的制约关系有两种，即互斥和同步。
多个并发进程之间，因竞争使用临界资源而互相排斥执行的间接制约关系，叫作互斥。  
1.3 同步
在某些地方，多个并发进程需要相互等待或交换信息而产生的直接制约关系，叫做同步。
并发进程之间不是相互排斥临界资源，而是相互依赖的关系。进一步地说，同步关系就是前一个进程的输出作为后一个进程的输入；当第一个进程没有输出时，第二个进程必须等待。具有同步关系的一组并发进程，相互发送的信息称为消息或事件。  
1.4 并行
在单核处理器的多道程序环境中，进程被交替执行，表现出一种并发的外部特征；在多核处理器的多道程序环境中，进程不仅可以交替执行，还可以重叠执行，即并行。
在多核处理器上，程序才可以实现并行处理。从而可知，并行是针对多核处理器而言。并行是同一时刻发生多个事件，具有并发的含义；但并发不一定并行，即并发事件之间不一定要同一时刻发生。
1.5 多线程
多线程是程序设计的逻辑层概念，它是进程中并发运行的一段代码。多线程可以实现线程间的切换执行。
1.6 异步
异步与同步是相对的：同步是顺序执行进程，执行完一个进程再执行下一个进程，需要进程之间等待、协调运行；异步是进程之间彼此独立，在等待其他进程的运行时，本进程继续做自己的事，不需要等待其他进程完成后再工作。
在多道程序环境下，进程以异步方式并发执行。
异步与多线程不是同等关系：异步是最终目的，多线程只是我们实现异步的一种方式。异步是让调用方法的主线程不用同步等待另一线程的完成，主线程可以同时做其它事情。
实现异步可以采用多线程技术或者交给另外的进程处理。  
**异步和同步，多线程与异步，单核与多核的不同**
异步和同步的区别：在IO等待时，同步不会切走，等待浪费了时间。
多线程比较容易地实现了异步切换的思想， 因为多线程较容易写。多线程本身还是以同步完成，但是比不上异步的效率。
多核的好处，就是可以同时做事情， 这个与单核不一样。如果都是独占CPU的作业，比如举杠铃。在单核情况下，多线程和单线程没有区别。  

**7、** 用P、V操作解决进程同步问题  
>